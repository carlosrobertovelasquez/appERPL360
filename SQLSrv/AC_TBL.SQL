CREATE TABLE ASIENTOS_CONTRATO(
				ASIENTO 	VARCHAR(10) 	NOT NULL,
				FUENTE 		VARCHAR(40) 	NOT NULL,
				REFERENCIA 	VARCHAR(249) 	NOT NULL,
				DEBITO_LOCAL 	DECIMAL(28,8) 	NULL,
				DEBITO_DOLAR 	DECIMAL(28,8) 	NULL,
				CREDITO_LOCAL 	DECIMAL(28,8) 	NULL,
				CREDITO_DOLAR 	DECIMAL(28,8) 	NULL,
				FECHA_ASIENTO 	DATETIME 	NULL
)          
go

CREATE TABLE CONTRATO (
	CONTRATO 		VARCHAR(10) 	NOT NULL,
	FECHA_CONTRATO 		DATETIME 	NOT NULL,
	FECHA_INICIO 		DATETIME 	NOT NULL,
	FECHA_FINAL 		DATETIME 	NOT NULL,
	FECHA_ULTIMA_FAC 	DATETIME 	NULL,
	CLIENTE 		VARCHAR(20) 	NOT NULL,
	SUSPENDIDO 		VARCHAR(1) 	NOT NULL,
	CONDICION_PAGO 		VARCHAR(4) 	NOT NULL,
	TIPO_CAMBIO 		decimal (28,8) 	NOT NULL DEFAULT (0),
	TOTAL_MERCADERIA 	decimal (28,8) 	NOT NULL DEFAULT (0),
	TOTAL_IMPUESTO1 	decimal (28,8) 	NOT NULL DEFAULT (0),
	TOTAL_IMPUESTO2 	decimal (28,8) 	NOT NULL DEFAULT (0),
	TOTAL_FACTURA 		decimal (28,8) 	NOT NULL DEFAULT (0),
	TOTAL_UNIDADES 		decimal (28,8) 	NOT NULL DEFAULT (0),
	MONEDA_FACTURA 		VARCHAR(1) 	NOT NULL,
	USUARIO_CREACION 	VARCHAR(25) 	NOT NULL,
	FECHA_CREACION 		DATETIME 	NOT NULL,
	USUARIO_MODIFICA 	VARCHAR(25) 	NULL,
	FECHA_MODIFICA 		DATETIME 	NULL,
	USUARIO_SUSPENDE 	VARCHAR(25) 	NULL,
	FECHA_SUSPENSION 	DATETIME 	NULL,
	TIPO_DOC_CXC 		VARCHAR(3) 	NULL,
	SUBTIPO_DOC_CXC 	smallint 	NULL,
	MARCADO 		VARCHAR(1) 	NOT NULL,
	USUARIO_MARCA 		VARCHAR(25) 	NULL,
	TIPO_ULT_FACTURA 	VARCHAR(1) 	NULL,
	ULT_FACTURA 		VARCHAR(50) 	NULL,
	TIPO_CONTRATO 		VARCHAR(10) 	NOT NULL,
	FECHA_PROXIMA_FACT 	DATETIME 	NULL,
	FECHA_VAL_FACT 		DATETIME 	NULL,
	USUARIO_ULT_FACT 	VARCHAR(25) 	NULL,
	DESCUENTO_GLOBAL 	decimal(20,8) 	NULL,
	NOTAS 			TEXT 		NULL,
	FCH_HR_AUTO_NO_FAC 	DATETIME 	NULL,
	USUARIO_AUTO_NO_FAC 	VARCHAR(25) 	NULL,
	FCH_HR_AUTORIZ_FAC 	DATETIME 	NULL,
	USUARIO_AUTORI_FAC 	VARCHAR(25) 	NULL,
	DIFERIDO 		VARCHAR(40) 	NULL,
	COMENTARIOS_FA 		VARCHAR(40) 	NULL,
	CLIENTE_ORIGEN 		VARCHAR(20) 	NOT NULL,
	CLIENTE_CORPOR 		VARCHAR(20) 	NOT NULL,
	MONTO_TOTAL_CONTRATO	decimal(20,8) 	NULL,
	FECHA_ULT_AUM_ANUAL 	DATETIME 	NULL,
	PORC_AUM_ANUAL 		decimal(20,8) 	NOT NULL DEFAULT ((0)),
	FECHA_SYS_PROXFACT 	DATETIME 	NULL,
	RAZON_SUSP 		VARCHAR(10) 	NULL,
	SOLO_SERVICIO 		VARCHAR(1) 	NOT NULL DEFAULT('S'),
	PERIODICIDAD 		VARCHAR(10) 	NOT NULL,
	RUBRO1			VARCHAR(50) 	NULL,
	RUBRO2			VARCHAR(50) 	NULL,
	RUBRO3			VARCHAR(50) 	NULL,
	RUBRO4			VARCHAR(50) 	NULL,
        RUBRO5			VARCHAR(50) 	NULL,
        DIAS_GRACIA 		INT 		NOT NULL DEFAULT '0',
        TIENE_DOCS_VENCIDOS 	VARCHAR(1) 	NOT NULL DEFAULT 'N',
        VENDEDOR		VARCHAR(4) 	NULL, 
	PAIS 			VARCHAR(4) 	NULL, 
	TOTAL_CONTRATO 		DECIMAL(28,8) 	NULL,
	CONTRATO_VIGENCIA_DESDE 	DATETIME NULL,
	CONTRATO_VIGENCIA_HASTA 	DATETIME NULL,
	ESTADO_CONTRATO			VARCHAR(1)	DEFAULT ('N')	NOT NULL,
	USO_CFDI VARCHAR(3) NULL,
	FORMA_PAGO VARCHAR(3) NULL
)
go

ALTER TABLE CONTRATO
       ADD CONSTRAINT XPKCONTR1 
       		PRIMARY KEY (CONTRATO)
go
       		
CREATE TABLE CONTRATO_LIN_DETALLE (
       CONTRATO             VARCHAR(10) NOT NULL,
       LINEA_CONTRATO       smallint NOT NULL,
       LINEA                smallint NOT NULL,
       DESCRIPCION          VARCHAR(40) NOT NULL,
       RUBRO1               VARCHAR(25) NULL,
       RUBRO2               VARCHAR(25) NULL,
       RUBRO3	            VARCHAR(25) NULL,
       RUBRO4	            VARCHAR(25) NULL,
       RUBRO5	            VARCHAR(25) NULL,
       RUBRO6	            VARCHAR(25) NULL,
       RUBRO7	            VARCHAR(25) NULL,
       RUBRO8	            VARCHAR(25) NULL,
       RUBRO9	            VARCHAR(25) NULL,
       RUBRO10	            VARCHAR(25) NULL,
       IMPORTE_LOCAL        decimal (28,8) NOT NULL DEFAULT (0),
       IMPORTE_DOLAR        decimal (28,8) NOT NULL DEFAULT (0)
)
go


ALTER TABLE CONTRATO_LIN_DETALLE
       ADD CONSTRAINT XPKCONTR_REP_ANEXO1 
       		PRIMARY KEY (CONTRATO, LINEA, LINEA_CONTRATO)
go    
       		
CREATE TABLE CONTRATO_LINEA (
       LINEA                smallint 	   NOT NULL,
       CONTRATO             VARCHAR(10)    NOT NULL,
       ARTICULO             VARCHAR(20)	   NOT NULL,
       CANTIDAD             decimal (28,8) NOT NULL DEFAULT (0),
       PRECIO_UNITARIO      decimal (28,8) NOT NULL DEFAULT (0),
       TOTAL_IMPUESTO1      decimal (28,8) NOT NULL DEFAULT (0),
       TOTAL_IMPUESTO2      decimal (28,8) NOT NULL DEFAULT (0),
       COSTO_TOTAL          decimal (28,8) NOT NULL DEFAULT (0),
       PRECIO_TOTAL         decimal (28,8) NOT NULL DEFAULT (0),
       DESCRIPCION          TEXT  	   NULL,
       COSTO_TOTAL_LOCAL    decimal (28,8) NOT NULL DEFAULT (0),
       COSTO_TOTAL_DOLAR    decimal (28,8) NOT NULL DEFAULT (0),
       DESCUENTO_LINEA 	    decimal(20,8)  NULL,
       TIPO_CALCULO	    VARCHAR(1) 	   NOT NULL DEFAULT('F'),
       CENTRO_COSTO 	VARCHAR(25) NULL,
       CUENTA_CONTABLE 	VARCHAR(25) NULL
			   
)
go


ALTER TABLE CONTRATO_LINEA
       ADD CONSTRAINT XPKCONTR_LINEA1 
       		PRIMARY KEY (LINEA, CONTRATO)
go

CREATE TABLE ESTADO_CONTRATOS(
                COD_ESTADO 	INTEGER IDENTITY(1,1) 		NOT NULL,
                ESTATUS 	VARCHAR(1) 			NOT NULL,
                CONTRATO 	VARCHAR(10) 			NOT NULL,
                FECHA 		DATETIME 			NOT NULL,
                NOTAS 		VARCHAR(249) 			NULL
)
go

ALTER TABLE $$COMPANIA$$.ESTADO_CONTRATOS
	ADD CONSTRAINT CODESTADOPK PRIMARY KEY (COD_ESTADO)
go
       		
CREATE TABLE FACT_CONTLIN_DETALLE (
       TIPO_DOCUMENTO       VARCHAR(1) 		NOT NULL,
       FACTURA              VARCHAR(50) 	NOT NULL,
       CONTRATO             VARCHAR(10) 	NOT NULL,
       LINEA                smallinT 		NOT NULL,
       DESCRIPCION          VARCHAR(40) 	NOT NULL,
       RUBRO1               VARCHAR(25) 	NULL,
       RUBRO2               VARCHAR(25) 	NULL,
       RUBRO3	            VARCHAR(25) 	NULL,
       RUBRO4	            VARCHAR(25) 	NULL,
       RUBRO5	            VARCHAR(25) 	NULL,
       RUBRO6	            VARCHAR(25) 	NULL,
       RUBRO7	            VARCHAR(25)	        NULL,
       RUBRO8	            VARCHAR(25) 	NULL,
       RUBRO9	            VARCHAR(25) 	NULL,
       RUBRO10	            VARCHAR(25) 	NULL,
       IMPORTE_LOCAL        DECIMAL(28,8) 	NOT NULL,
       IMPORTE_DOLAR        DECIMAL(28,8) 	NOT NULL,
       LINEA_DETALLE 	    int		  	NOT NULL
)
go

ALTER TABLE FACT_CONTLIN_DETALLE
       ADD CONSTRAINT XPKFACT_CONTLIN_DETALLE1
	   PRIMARY KEY (TIPO_DOCUMENTO, FACTURA, CONTRATO, LINEA,LINEA_DETALLE)
go


CREATE TABLE FACTURA_CONTRATO (
       TIPO_DOCUMENTO       VARCHAR(1) NOT NULL,
       FACTURA              VARCHAR(50) NOT NULL,
       CONTRATO             VARCHAR(10) NOT NULL
)
go

ALTER TABLE FACTURA_CONTRATO
       ADD CONSTRAINT XPKFACTURA_CONTR1 
	   PRIMARY KEY (TIPO_DOCUMENTO, FACTURA, CONTRATO)
go

CREATE TABLE PERIODICIDAD (
	CODIGO 			VARCHAR (10)	NOT NULL,
	DESCRIPCION 		VARCHAR (40) 	NOT NULL,
	TIPO_FRECUENCIA 	VARCHAR(1) 	NOT NULL,
	SUBTIPO_FRECUENCIA 	VARCHAR(1) 	NULL,
	INTERVALO_FRECUENCIA 	int 		NOT NULL,
	DIAS_SEMANA_FRECUENCIA	VARCHAR(7) 	NULL,
	DIA_DEL_MES 		int 		NULL,
	ORDINAL_FRECUENCIA 	VARCHAR(1) 	NULL,
	MES_FRECUENCIA 		int 		NULL,
	USA_FECHA_CONTRATO 	VARCHAR(1) 	NULL
)
go


ALTER TABLE PERIODICIDAD ADD 
	CONSTRAINT XPKPERIOD 
		PRIMARY KEY (CODIGO)
go


CREATE TABLE RAZON_SUSPENSION(
	CODIGO 		VARCHAR(10) NOT NULL,
	DESCRIPCION 	VARCHAR(40) NOT NULL	
)
go

ALTER TABLE RAZON_SUSPENSION ADD 
	CONSTRAINT XPKRAZSUSP 
		PRIMARY KEY (CODIGO)
go
		
CREATE TABLE TIPO_CONTRATO_REPET (
       TIPO_CONTRATO        VARCHAR(10) NOT NULL,
       DESCRIPCION          VARCHAR(40) NULL       
)
go



ALTER TABLE TIPO_CONTRATO_REPET ADD   
	PRIMARY KEY (TIPO_CONTRATO ) 
go

